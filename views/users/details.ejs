<% if(id){ %>
    <%- include('../partials/userLoginHeader') %>
    <% }else { %>
       <%- include('../partials/userHeader') %>
       <% } %>

    <!-- <style>
   div{
    border: solid red 1px;
   }
 </style> -->
<br>
    <!-- Breadcrumb Start -->
    <div class="container-fluid">
        <div class="row px-xl-5">
            <div class="col-12">
                <nav class="breadcrumb bg-light mb-30">
                    <a class="breadcrumb-item text-dark" href="/">Home</a>
                    <a class="breadcrumb-item text-dark" href="/loadShop">Shop</a>
                    <span class="breadcrumb-item active">Shop Detail</span>
                </nav>
            </div>
        </div>
    </div>
    <!-- Breadcrumb End -->



    <!-- Shop Detail Start -->
 
    <!-- Shop Detail Start -->
    <div class="container-fluid pb-5">
        <div class="row px-xl-5">
            
                <% for(i=0;i<detail.image.length;i++){ %>
                    <div class="col-md-6 position-relative ">
                      <div class="d-flex justify-content-center  p-3">
                        <div id="img-container" class="img-cont">
                          <img id="main-image" class="main-image img-responsive" src="/uploads/<%=detail.image[i]%>" alt="">
                        </div>
                      </div>
                      <div class="d-flex px-5 justify-content-center">
                        <div class="col-2 d-flex justify-content-center mx-3">
                          <div class="card product-alt-card p-2">
                            <img class="product-alt-images img-responsive" id="image1" onclick="changeImage(this)"
                              src="/uploads/<%=detail.image[i]%>" alt="">
                          </div>
                        </div>
                        <div class="col-2 d-flex justify-content-center mx-3">
                          <div class="card product-alt-card p-2">
                            <img class="product-alt-images img-responsive" id="image2" onclick="changeImage(this)"
                              src="/uploads/<%=detail.image[i+1]%>" alt="">
                          </div>
                        </div>
                        <div class="col-2 d-flex justify-content-center mx-3">
                          <div class="card product-alt-card p-2">
                            <img class="product-alt-images img-responsive" id="image3" onclick="changeImage(this)" src="/uploads/<%=detail.image[i+2]%>"
                              alt="">
                          </div>
                        </div>
                      </div>
                    
                    </div>
                    <% break }%>

            <div class="col-md-6 h-auto mb-30">
                <div class="h-100  p-30 ">
                    <br>
                    <h2 class="text-uppercase">
                        <%=detail.name%>
                    </h2>
                    <div class="d-flex mb-3">
                    </div>
                    <h3 class="font-weight-semi-bold mb-4">Rs <%=detail.price%>
                    </h3>
                    <p class="mb-4">
                        <%=detail.description%>
                    </p>
                    <div class="d-flex mb-3">
                
                    </div>

                    <% if(detail.stock<=5){%>
                        <% if(detail.stock<1){%>
                            <h6 style="color: red;">Stock Out!!</h6>
                            <a href="/addToCart?id=<%=detail._id%>"> <button class="btn btn-primary px-3" disabled><i
                                        class="fa fa-shopping-cart mr-1 "></i> Add To
                                    Cart </button></a>
                            <%}else{%>
                                <h6 style="color: red;">Only <%=detail.stock%> left</h6>
                                <a href="/addToCart?id=<%=detail._id%>"> <button class="btn btn-primary px-3"><i
                                            class="fa fa-shopping-cart mr-1"></i> Add To
                                        Cart</button></a>
                                <%}}else{%>
                                    <a href="/addToCart?id=<%=detail._id%>"> <button class="btn btn-primary px-3"><i
                                                class="fa fa-shopping-cart mr-1"></i> Add To
                                            Cart</button></a>
                                    <%}%>

                                    <a href="/addWishlist?id=<%=detail._id%>"> <button class="btn btn-secondary px-3"><i
                                        class="fa fa-Wishlist mr-1"></i> Add To
                                    Wishlist</button></a>
                                    
                </div>
                <div>
                    <h5 class="" style="color: green;">
                        <%=message%>
                    </h5>
                </div>

            </div>
        
    </div>
    <br>
    <hr>
    <div class="row px-xl-5">
        <div class="col">
            <div class=" p-30">
                <div class="nav nav-tabs mb-4">
                    <a class="nav-item nav-link text-dark active" data-toggle="tab" href="#tab-pane-1">Reviews</a>
                    <a class="nav-item nav-link text-dark" data-toggle="tab" href="#tab-pane-2">Related Products</a>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tab-pane-1">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="media mb-4">
                            <div class="media-body">
                              <% for (i = 0; i < detail.review.length; i++) { %>
                                <h6 style="font-size: 12px;">
                                  <%= detail.review[i].username %>
                                </h6>
                                <p style="font-size: 12px;">
                                  <%= detail.review[i].review %>
                                </p>
                              <% } %>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  
                    <div class="tab-pane fade" id="tab-pane-2">
                      <div class="row">
                        <% for (i = 0; i < related.length; i++) { %>
                          <div class="col-12 col-md-4 mb-4">
                            <div class="card h-100 shadow">
                              <a href="/view-details?id=<%= related[i]._id %>">
                                <img style="height:200px ; object-fit: contain; display: block; margin: 0 auto;" src="/uploads/<%= related[i].image[0] %>" class="card-img-top" alt="...">
                              </a>
                              <div class="card-body">
                                <ul class="list-unstyled d-flex justify-content-between" >
                                  <li>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                  </li>
                                  <li class="text-muted text-right" style="font-size: 18px;">Rs <%= related[i].price %></li>
                                </ul>
                                <a href="/view-details?id=<%= related[i]._id %>" class="h2 text-decoration-none text-dark" style="font-size: 14px;">
                                  <%= related[i].name %>
                                </a>
                                <p class="card-text" style="font-size: 12px;">
                                  <!-- Your text here -->
                                </p>
                                <a href="/addToCart?id=<%= detail._id %>">
                                  <button class="btn btn-primary px-3" style="font-size: 10px;">
                                    <i class="fa fa-shopping-cart mr-1"></i> Add To Cart
                                  </button>
                                </a>
                              </div>
                            </div>
                          </div>
                        <% } %>
                      </div>
                    </div>
                  </div>
                  
            </div>
        </div>
    </div>
</div>

    </div>
    <!-- Shop Detail End -->

    <script src="https://cdn.jsdelivr.net/npm/js-image-zoom/js-image-zoom.min.js"></script> 
    <script src="/script/scriptadmin.js"></script>

    <script>
      const mainimage = document.getElementById("main-image")
      function changeImage(image) {
        mainimage.src = image.src
        new ImageZoom(document.getElementById("img-container"), options);
      }
      var options = {
        width: 200,
        height: 350,
        zoomWidth: 300,
        
      };
      new ImageZoom(document.getElementById("img-container"), options);

    </script>

<style>
    .img-cont {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 300px; /* Adjust the height as needed */
  }
  
  .main-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
  
  </style>

    <%- include ('../partials/footer.ejs') %>